<div class="index-search-bar" id="index-search-bar">
  <div class="search-input">
  <%= form_tag cities_path, method: :get do %>
    <%= text_field_tag "location[name]", @city, required: true, placeholder: "Rechercher une ville bretonne" %>
    <div class="search-bar-main-criterias">
      <div>
      A
      <%= number_field_tag "location[max_distance_km]", @max_distance_km, min: 1, width: 1 %>
      km
      </div>

      <div>
      <%= number_field_tag "max_population", @max_population, min: 1, width: 1 %>
      habitants maximum
      </div>

      <div>
      <%= number_field_tag "max_age_average", @max_age_average, min: 18, width: 1 %>
      d'âge moyen maximum
      </div>
    </div>
    </div>
    <div class="checkboxes">

      <%= check_box_tag "primary_school",1, (:checked if params[:primary_school].present?) %>
      <label for="primary_school"><i class="fas fa-child mr-2"></i>Maternelles et primaires</label>

      <%= check_box_tag "secondary_school", 1, (:checked if params[:secondary_school].present?) %>
      <label for="secondary_school"><i class="fas fa-book mr-2"></i>Collèges et lycées</label>

      <%= check_box_tag "fibre", 1, (:checked if params[:fibre].present?) %>
      <label for="fibre"><i class="fas fa-wifi mr-2"></i>Fibre</label>

      <%= check_box_tag "network", 1, (:checked if params[:network].present?) %>
      <label for="network"><i class="fas fa-mobile-alt mr-2"></i>4G</label>

       <%= check_box_tag "doctor", 1, (:checked if params[:doctor].present?) %>
      <label for="doctor"><i class="fas fa-briefcase-medical mr-2"></i>Docteurs</label>

      <%= check_box_tag "supermarket", 1, (:checked if params[:supermarket].present?)%>
      <label for="supermarket"><i class="fas fa-shopping-cart mr-2"></i>Supermarchés</label>

      <%= check_box_tag "commodity", 1, (:checked if params[:commodity].present?) %>
      <label for="commodity"><i class="fas fa-cash-register mr-2"></i>Commerces</label>

      <%= check_box_tag "handiwork", 1, (:checked if params[:handiwork].present?) %>
      <label for="handiwork"><i class="fas fa-tools mr-2"></i>Magasins de bricolage</label>

      <%= check_box_tag "grocery", 1, (:checked if params[:grocery].present?) %>
      <label for="grocery"><i class="fas fa-shopping-basket mr-2"></i>Epiceries</label>

      <%= check_box_tag "butchery", 1, (:checked if params[:butchery].present?) %>
      <label for="butchery"><i class="fas fa-drumstick-bite mr-2"></i>Boucheries</label>

      <%= check_box_tag "bakery", 1, (:checked if params[:bakery].present?) %>
      <label for="bakery"><i class="fas fa-bread-slice mr-2"></i>Boulangeries</label>

      <%= check_box_tag "bookstore", 1, (:checked if params[:bookstore].present?) %>
      <label for="bookstore"><i class="fas fa-book-open mr-2"></i>Librairies</label>

      <%= check_box_tag "clothe", 1, (:checked if params[:clothe].present?) %>
      <label for="clothe"><i class="fas fa-tshirt mr-2"></i>Magasins de vêtements</label>

      <%= check_box_tag "shoestore", 1, (:checked if params[:shoestore].present?) %>
      <label for="shoestore"><i class="fas fa-shoe-prints mr-2"></i>Magasins de chaussures</label>

      <%= check_box_tag "fish_market", 1, (:checked if params[:fish_market].present?) %>
      <label for="fish_market"><i class="fas fa-fish mr-2"></i>Poissonneries</label>

      <%= check_box_tag "hardware", 1, (:checked if params[:hardware].present?) %>
      <label for="hardware"><i class="fas fa-brush mr-2"></i>Drogueries quincailleries</label>

      <%= check_box_tag "jewellery", 1, (:checked if params[:jewellery].present?) %>
      <label for="jewellery"><i class="fas fa-gem mr-2"></i>Bijouteries</label>

      <%= check_box_tag "cosmetic", 1, (:checked if params[:cosmetic].present?) %>
      <label for="cosmetic"><i class="fas fa-magic mr-2"></i>Parfumeries</label>

    </div>
    <%= submit_tag "Rechercher", class: "btn btn-primary search-button"%>
  <% end %>
</div>

<div id="map"
     style="width: 100%; height: 100vh;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    <div id="show"> </div>
</div>

<div class="caption">
  <span class="caption-title"> Correspondance de vos critères </span>
  <div class="caption-markers">
  <div class="caption-marker">
    <%= image_tag("green-marker.svg") %>
    <span> > 75% </span>
  </div>

  <div class="caption-marker">
    <%= image_tag("orange-marker.svg") %>
    <span> > 50% </span>
  </div>
  <div class="caption-marker">
    <%= image_tag("red-marker.svg") %>
    <span> < 50% </span>
  </div>
  </div>

<div id="star" data-image-url="<%= image_url("favorite-star.svg") %>">
</div>

<div id="marker" data-image-url="<%= image_url("green-marker.svg") %>">
</div>
